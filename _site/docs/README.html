<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>BepInEx Universal Utilities | BepInEx Universal Utilities </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="BepInEx Universal Utilities | BepInEx Universal Utilities ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/corycaron5/BepInExUniUtils/blob/main/docs/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="BepInEx Universal Utilities">
            BepInEx Universal Utilities
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="bepinex-universal-utilities">BepInEx Universal Utilities</h1>

<p>Universal Utilities for modding Unity games with BepInEx.</p>
<hr>
<h2 id="features">Features</h2>
<ul>
<li>Input framework for mapping actions to Unity keycodes, including modifiers</li>
<li>Simple Json configuration system for when BepInEx configs aren't powerful enough</li>
</ul>
<hr>
<h2 id="dependencies">Dependencies</h2>
<ul>
<li><a href="https://github.com/BepInEx/BepInEx">BepInEx</a></li>
<li><a href="https://github.com/JamesNK/Newtonsoft.Json">NewtonsoftJson</a></li>
<li>Netstandard 2.x (Target framework) (InputTrigger uses the HashCode utility for generating it's hashcode, to support other frameworks, clone this repository and generate the hashcode another way)</li>
</ul>
<h2 id="installation">Installation</h2>
<h3 id="end-users">End Users</h3>
<p>Download the latest version from the <a href="https://github.com/corycaron5/BepInExUniUtils/releases">Releases</a> page.
Unzip and copy the <code>BepInExUniUtils.dll</code> file into the BepInEx/plugins folder.</p>
<h3 id="developers">Developers</h3>
<p>Currently there is no Nuget package for this, just reference the assembly directly in your IDE of choice.</p>
<hr>
<h2 id="input-framework">Input Framework</h2>
<p>The Input Framework is pretty straight forward.<br>
An <a href="../api/BepInExUniUtils.InputFramework.InputTrigger.html">InputTrigger</a> is mapped to a list of <a href="../api/BepInExUniUtils.InputFramework.AbstractAction.html">AbstractActions</a> that are all executed sequentially when the input is detected.<br>
Inputs can trigger once or repeatedly.<br>
The <a href="../api/BepInExUniUtils.InputFramework.InputTrigger.html">InputTrigger</a> is a struct containing a main <a href="https://docs.unity3d.com/ScriptReference/KeyCode.html">KeyCode</a> that is used to detect the input, and an optional modifier <a href="https://docs.unity3d.com/ScriptReference/KeyCode.html">KeyCode</a> that must be held down to trigger it.</p>
<h3 id="input-mappings">Input Mappings</h3>
<p>Inputs are mapped to actions in the Input.json config file. This file is saved directly along other BepInEx configs.<br>
A default file will be generated if it doesn't exist, but here is an example:</p>
<blockquote>
<pre><code>{
  &quot;InputActions&quot;: [
    {
      &quot;InputTrigger&quot;: {
        &quot;Modifier&quot;: &quot;None&quot;,
        &quot;Key&quot;: &quot;F9&quot;
      },
      &quot;Actions&quot;: [
        &quot;DummyAction&quot;
      ]
    }
  ],
  &quot;RepeatingInputActions&quot;: [
    {
      &quot;InputTrigger&quot;: {
        &quot;Modifier&quot;: &quot;RightShift&quot;,
        &quot;Key&quot;: &quot;F10&quot;
      },
      &quot;Actions&quot;: [
        &quot;DummyAction&quot;,
        &quot;DummyAction&quot;
      ]
    }
  ]
}
</code></pre>
</blockquote>
<h3 id="creating-actions">Creating Actions</h3>
<p>Creating new actions is as simple as extending AbstractAction and implementing the Execute method.<br>
The execute method has no arguments and the ID of the action is handled automatically.</p>
<blockquote>
<pre><code>/// &lt;summary&gt;
/// A dummy action that does nothing.
/// &lt;/summary&gt;
/// &lt;param name=&quot;id&quot;&gt;The ID of the action.&lt;/param&gt;
public class DummyAction(string id) :AbstractAction(id)
{
    public override void Execute()
    {
        UniUtilsPlugin.Logger.LogDebug(&quot;This does nothing&quot;);
    }
}
</code></pre>
</blockquote>
<h3 id="registering-custom-actions">Registering Custom Actions</h3>
<p>Actions can be manually registered by passing each <code>Type</code> that extends <a href="../api/BepInExUniUtils.InputFramework.AbstractAction.html">AbstractActions</a> to the method <a href="../api/BepInExUniUtils.UniUtilsPlugin.html#BepInExUniUtils_UniUtilsPlugin_RegisterAction_System_Type_">UniUtilsPlugin.RegisterAction(Type)</a><br>
However there is a much simpler method that uses reflection to automatically register all actions. Simply implement this method in your plugin and call it in <code>Awake()</code>.</p>
<blockquote>
<pre><code>/// &lt;summary&gt;
/// Automatically registers all actions in this assembly.
/// &lt;/summary&gt;
private static void RegisterInternalActions()
{
    foreach (Type type in Assembly.GetExecutingAssembly().GetTypes())
    {
        if(type.IsSubclassOf(typeof(AbstractAction))) UniUtilsPlugin.RegisterAction(type);
    }
}
</code></pre>
</blockquote>
<hr>
<h2 id="json-configs">Json Configs</h2>
<p>Json can be a powerful tool for serializing data and allows for much more complex functionality over TOML.<br>
It does have a few drawbacks though, the inability to add comments and readability are the biggest when using it for configs.<br>
My recommendation would be to use the standard BepInEx config unless you need to serialize collections or types not supported by the standard BepInEx config.<br>
That being said, you can simply extend <a href="../api/BepInExUniUtils.Configuration.JsonConfigBase.html">JsonConfigBase</a> and implement <code>GenerateDefaultConfig()</code>, <code>LoadConfig()</code>, and <code>SaveConfig()</code> if you want to create a Json config.<br>
There is also an EventHandler <code>ConfigLoaded</code> in the event you need to trigger code upon loading the config.<br>
You should make sure to call <code>OnConfigLoaded()</code> at the end of your <code>LoadConfig()</code> method to trigger the ConfigLoaded event.<br>
See <a href="../api/BepInExUniUtils.Configuration.InputConfig.html">InputConfig</a> for an example implementation.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/corycaron5/BepInExUniUtils/blob/main/docs/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
